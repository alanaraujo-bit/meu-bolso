(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{72341:(e,a,r)=>{Promise.resolve().then(r.bind(r,97269))},97269:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>c});var t=r(95155),s=r(12115),o=r(12108),i=r(35695);let l={receita:["\uD83D\uDCB0","\uD83D\uDCB8","\uD83D\uDCC8","\uD83D\uDCBB","\uD83D\uDED2","\uD83C\uDFC6","\uD83D\uDC8E","\uD83C\uDFAF","\uD83D\uDCCA","\uD83D\uDCB5"],despesa:["\uD83C\uDF7D️","\uD83D\uDE97","\uD83C\uDFE0","\uD83C\uDFE5","\uD83D\uDCDA","\uD83C\uDFAE","\uD83D\uDECD️","\uD83D\uDD27","\uD83D\uDCB3","⚡"],ambos:["\uD83D\uDD04","\uD83D\uDEA8","\uD83D\uDCF1","\uD83C\uDFAD","\uD83C\uDF1F","\uD83D\uDD11","\uD83D\uDCCB","\uD83C\uDFAA","\uD83C\uDFA8","\uD83C\uDFB5"]},n=["#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1","#14B8A6","#F43F5E","#A855F7","#0EA5E9","#22C55E","#DC2626","#D97706","#059669","#2563EB","#7C3AED"];function c(){let{data:e,status:a}=(0,o.useSession)(),r=(0,i.useRouter)(),[c,d]=(0,s.useState)([]),[x,m]=(0,s.useState)(!0),[u,g]=(0,s.useState)(!1),[h,b]=(0,s.useState)(null),[p,f]=(0,s.useState)(""),[j,y]=(0,s.useState)({nome:"",tipo:"receita",cor:"#10B981",icone:"\uD83D\uDCB0"});async function N(){try{m(!0);let e=await fetch("/api/categorias");if(e.ok){let a=await e.json();d(a)}else f("Erro ao carregar categorias")}catch(e){f("Erro ao carregar categorias")}finally{m(!1)}}async function v(e){e.preventDefault(),f("");try{let e=await fetch(h?"/api/categorias/".concat(h):"/api/categorias",{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),a=await e.json();e.ok?(f(h?"Categoria atualizada com sucesso!":"Categoria criada com sucesso!"),D(),N()):f(a.error||"Erro ao salvar categoria")}catch(e){f("Erro ao salvar categoria")}finally{m(!1)}}async function C(e){y({nome:e.nome,tipo:e.tipo,cor:e.cor||"#10B981",icone:e.icone||"\uD83D\uDCB0"}),b(e.id),g(!0)}async function w(e,a){if(confirm('Tem certeza que deseja excluir a categoria "'.concat(a,'"?')))try{let a=await fetch("/api/categorias/".concat(e),{method:"DELETE"});if(await a.json(),a.ok)f("Categoria exclu\xedda com sucesso!"),N();else{let e=await a.json();f(e.error||"Erro ao excluir categoria")}}catch(e){f("Erro ao excluir categoria")}}function D(){y({nome:"",tipo:"receita",cor:"#10B981",icone:"\uD83D\uDCB0"}),b(null),g(!1)}return((0,s.useEffect)(()=>{if("loading"!==a&&!e)return void r.push("/login")},[e,a,r]),(0,s.useEffect)(()=>{e&&N()},[e]),(0,s.useEffect)(()=>{if(!h){let e=l[j.tipo];e&&!e.includes(j.icone)&&y(a=>({...a,icone:e[0]}))}},[j.tipo,h]),"loading"===a)?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Carregando..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"\uD83D\uDCCA Categorias"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Organize suas receitas e despesas em categorias personalizadas"})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-4 md:mt-0",children:[(0,t.jsx)("button",{onClick:()=>r.push("/transacoes"),className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-3 rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all duration-200 font-medium shadow-lg",children:"\uD83D\uDCB0 Gerenciar Transa\xe7\xf5es"}),(0,t.jsx)("button",{onClick:()=>r.push("/"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 underline",children:"Voltar ao In\xedcio"})]})]}),p&&(0,t.jsx)("div",{className:"mb-6 p-4 rounded-xl text-sm font-medium ".concat(p.includes("sucesso")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:p}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("button",{onClick:()=>g(!u),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg",children:u?"Cancelar":"Nova Categoria"})}),u&&(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:h?"Editar Categoria":"Nova Categoria"}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Categoria *"}),(0,t.jsx)("input",{type:"text",placeholder:"Ex: Alimenta\xe7\xe3o, Sal\xe1rio...",value:j.nome,onChange:e=>y({...j,nome:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo *"}),(0,t.jsxs)("select",{value:j.tipo,onChange:e=>y({...j,tipo:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",children:[(0,t.jsx)("option",{value:"receita",children:"Receita"}),(0,t.jsx)("option",{value:"despesa",children:"Despesa"}),(0,t.jsx)("option",{value:"ambos",children:"Ambos"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>y({...j,cor:e}),className:"w-8 h-8 rounded-full border-2 transition-all ".concat(j.cor===e?"border-gray-800 scale-110":"border-gray-300"),style:{backgroundColor:e}},e))}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:j.cor}}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Cor selecionada: ",j.cor]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xcdcone"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:l[j.tipo].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>y({...j,icone:e}),className:"w-12 h-12 rounded-xl border-2 text-2xl transition-all hover:scale-105 ".concat(j.icone===e?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:e},e))}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-2xl",children:j.icone}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"\xcdcone selecionado"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center text-2xl text-white shadow-lg",style:{backgroundColor:j.cor},children:j.icone}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:j.nome||"Nome da categoria"}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("receita"===j.tipo?"bg-green-100 text-green-800":"despesa"===j.tipo?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:"receita"===j.tipo?"Receita":"despesa"===j.tipo?"Despesa":"Ambos"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg",children:h?"Atualizar Categoria":"Criar Categoria"}),(0,t.jsx)("button",{type:"button",onClick:D,className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-300 transition-all duration-200 font-medium",children:"Cancelar"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Suas Categorias"})}),x?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Carregando categorias..."})]}):0===c.length?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("span",{className:"text-gray-400 text-2xl",children:"\uD83D\uDCCA"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma categoria encontrada"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Crie sua primeira categoria para come\xe7ar a organizar suas finan\xe7as!"}),(0,t.jsx)("button",{onClick:()=>g(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg",children:"Criar Primeira Categoria"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:c.map(e=>(0,t.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200 hover:shadow-md transition-all duration-200",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-xl text-white shadow-lg",style:{backgroundColor:e.cor||"#6B7280"},children:e.icone||"\uD83D\uDCCA"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.nome}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("receita"===e.tipo?"bg-green-100 text-green-800":"despesa"===e.tipo?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:"receita"===e.tipo?"Receita":"despesa"===e.tipo?"Despesa":"Ambos"})]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("button",{onClick:()=>C(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Editar",children:"✏️"}),(0,t.jsx)("button",{onClick:()=>w(e.id,e.nome),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Excluir",children:"\uD83D\uDDD1️"})]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsxs)("p",{children:["Criada em: ",new Date(e.criadoEm).toLocaleDateString("pt-BR")]}),e._count&&(0,t.jsxs)("p",{children:["Transa\xe7\xf5es: ",e._count.transacoes]})]})]},e.id))})]}),c.length>0&&(0,t.jsxs)("div",{className:"mt-8 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-white text-center",children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Pronto para come\xe7ar? \uD83D\uDE80"}),(0,t.jsx)("p",{className:"text-blue-100 mb-6",children:"Agora que voc\xea tem categorias organizadas, comece a registrar suas transa\xe7\xf5es!"}),(0,t.jsx)("button",{onClick:()=>r.push("/transacoes"),className:"bg-white text-blue-600 px-8 py-4 rounded-xl hover:bg-gray-100 transition-all duration-200 font-medium text-lg shadow-lg",children:"\uD83D\uDCB0 Gerenciar Transa\xe7\xf5es"})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[454,441,684,358],()=>a(72341)),_N_E=e.O()}]);