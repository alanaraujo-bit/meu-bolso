(()=>{var e={};e.id=558,e.ids=[558],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},12909:(e,r,t)=>{"use strict";t.d(r,{N:()=>n});var a=t(13581),i=t(94747),s=t(85663);let o=[{id:"1",email:"teste@teste.com",nome:"Usu\xe1rio Teste",senha:"$2b$10$g92IzJGsugx/Olm/4WqHJO3SHiJb9vqMiXSOVEfG4yD0Yy1znTN2q"},{id:"2",email:"admin@admin.com",nome:"Administrador",senha:"$2b$10$g92IzJGsugx/Olm/4WqHJO3SHiJb9vqMiXSOVEfG4yD0Yy1znTN2q"}],n={providers:[(0,a.A)({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;try{let r=await i.z.usuario.findUnique({where:{email:e.email}});if(r&&await s.Ay.compare(e.password,r.senha))return{id:r.id,email:r.email,name:r.nome||""}}catch(t){console.log("⚠️ Erro de conex\xe3o com banco, usando usu\xe1rios tempor\xe1rios:",t);let r=o.find(r=>r.email===e.email);if(r&&await s.Ay.compare(e.password,r.senha))return{id:r.id,email:r.email,name:r.nome}}return null}})],session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:r})=>(r&&(e.id=r.id),e),session:async({session:e,token:r})=>(r&&(e.user.id=r.id),e)},pages:{signIn:"/login"}}},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},40312:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>z,routeModule:()=>m,serverHooks:()=>x,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>w});var a={};t.r(a),t.d(a,{GET:()=>l,POST:()=>p});var i=t(96559),s=t(48088),o=t(37719),n=t(32190),c=t(94747),d=t(19854),u=t(12909);async function p(e){try{let r=await (0,d.getServerSession)(u.N);if(!r?.user?.email)return n.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{nome:t,tipo:a,cor:i,icone:s}=await e.json();if(!t||!a)return n.NextResponse.json({error:"Nome e tipo s\xe3o obrigat\xf3rios"},{status:400});let o=await c.z.usuario.findUnique({where:{email:r.user.email}});if(!o)return n.NextResponse.json({error:"Usu\xe1rio n\xe3o encontrado"},{status:404});if(await c.z.categoria.findFirst({where:{nome:t,userId:o.id}}))return n.NextResponse.json({error:"J\xe1 existe uma categoria com este nome"},{status:400});let p=await c.z.categoria.create({data:{nome:t,tipo:a,cor:i||"#6B7280",icone:s||"\uD83D\uDCCA",userId:o.id}});return n.NextResponse.json(p)}catch(e){return n.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}async function l(){try{let e=await (0,d.getServerSession)(u.N);if(!e?.user?.email)return n.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let r=await c.z.usuario.findUnique({where:{email:e.user.email}});if(!r)return n.NextResponse.json({error:"Usu\xe1rio n\xe3o encontrado"},{status:404});let t=await c.z.categoria.findMany({where:{userId:r.id}});0===t.length&&(await c.z.categoria.create({data:{nome:"Sal\xe1rio",tipo:"receita",cor:"#10B981",icone:"\uD83D\uDCB0",userId:r.id}}),await c.z.categoria.create({data:{nome:"Freelance",tipo:"receita",cor:"#3B82F6",icone:"\uD83D\uDCBB",userId:r.id}}),await c.z.categoria.create({data:{nome:"Investimentos",tipo:"receita",cor:"#8B5CF6",icone:"\uD83D\uDCC8",userId:r.id}}),await c.z.categoria.create({data:{nome:"Vendas",tipo:"receita",cor:"#06B6D4",icone:"\uD83D\uDED2",userId:r.id}}),await c.z.categoria.create({data:{nome:"Outros Ganhos",tipo:"receita",cor:"#84CC16",icone:"\uD83D\uDCB8",userId:r.id}}),await c.z.categoria.create({data:{nome:"Alimenta\xe7\xe3o",tipo:"despesa",cor:"#EF4444",icone:"\uD83C\uDF7D️",userId:r.id}}),await c.z.categoria.create({data:{nome:"Transporte",tipo:"despesa",cor:"#F97316",icone:"\uD83D\uDE97",userId:r.id}}),await c.z.categoria.create({data:{nome:"Moradia",tipo:"despesa",cor:"#8B5CF6",icone:"\uD83C\uDFE0",userId:r.id}}),await c.z.categoria.create({data:{nome:"Sa\xfade",tipo:"despesa",cor:"#DC2626",icone:"\uD83C\uDFE5",userId:r.id}}),await c.z.categoria.create({data:{nome:"Educa\xe7\xe3o",tipo:"despesa",cor:"#2563EB",icone:"\uD83D\uDCDA",userId:r.id}}),await c.z.categoria.create({data:{nome:"Lazer",tipo:"despesa",cor:"#EA580C",icone:"\uD83C\uDFAE",userId:r.id}}),await c.z.categoria.create({data:{nome:"Compras",tipo:"despesa",cor:"#EC4899",icone:"\uD83D\uDECD️",userId:r.id}}),await c.z.categoria.create({data:{nome:"Servi\xe7os",tipo:"despesa",cor:"#6B7280",icone:"\uD83D\uDD27",userId:r.id}}),await c.z.categoria.create({data:{nome:"Outros Gastos",tipo:"despesa",cor:"#9CA3AF",icone:"\uD83D\uDCB3",userId:r.id}}),await c.z.categoria.create({data:{nome:"Transfer\xeancias",tipo:"ambos",cor:"#4F46E5",icone:"\uD83D\uDD04",userId:r.id}}),await c.z.categoria.create({data:{nome:"Emerg\xeancia",tipo:"ambos",cor:"#B91C1C",icone:"\uD83D\uDEA8",userId:r.id}}));let a=await c.z.categoria.findMany({where:{userId:r.id},include:{_count:{select:{transacoes:!0}}},orderBy:{criadoEm:"desc"}});return n.NextResponse.json(a)}catch(e){return n.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/categorias/route",pathname:"/api/categorias",filename:"route",bundlePath:"app/api/categorias/route"},resolvedPagePath:"C:\\Users\\Alan Ara\xfajo\\Documents\\Meu bolso\\src\\app\\api\\categorias\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:g,workUnitAsyncStorage:w,serverHooks:x}=m;function z(){return(0,o.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:w})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},94735:e=>{"use strict";e.exports=require("events")},94747:(e,r,t)=>{"use strict";t.d(r,{z:()=>i});let a=require("@prisma/client"),i=global.prisma||new a.PrismaClient},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[243,580,663,412],()=>t(40312));module.exports=a})();