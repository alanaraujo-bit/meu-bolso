(()=>{var e={};e.id=703,e.ids=[703],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},41545:(e,o,r)=>{"use strict";r.r(o),r.d(o,{patchFetch:()=>x,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{POST:()=>d});var t=r(96559),a=r(48088),n=r(37719),i=r(32190),c=r(94747),u=r(85663);async function d(e){try{console.log("\uD83D\uDCDD Iniciando processo de cadastro...");let{nome:o,email:r,senha:s}=await e.json();if(console.log("\uD83D\uDCCB Dados recebidos:",{nome:o,email:r,senhaLength:s?.length}),!o||!r||!s)return console.log("❌ Valida\xe7\xe3o falhou: campos obrigat\xf3rios"),i.NextResponse.json({error:"Todos os campos s\xe3o obrigat\xf3rios"},{status:400});if(s.length<6)return console.log("❌ Valida\xe7\xe3o falhou: senha muito curta"),i.NextResponse.json({error:"A senha deve ter pelo menos 6 caracteres"},{status:400});if(console.log("\uD83D\uDD0D Verificando se usu\xe1rio j\xe1 existe..."),await c.z.usuario.findUnique({where:{email:r}}))return console.log("❌ Usu\xe1rio j\xe1 existe:",r),i.NextResponse.json({error:"Usu\xe1rio j\xe1 existe com este email"},{status:400});console.log("\uD83D\uDD10 Criptografando senha...");let t=await u.Ay.hash(s,12);console.log("\uD83D\uDC64 Criando usu\xe1rio no banco...");let a=await c.z.usuario.create({data:{nome:o,email:r,senha:t}});return console.log("✅ Usu\xe1rio criado com sucesso:",a.email),i.NextResponse.json({message:"Usu\xe1rio criado com sucesso",usuario:{id:a.id,nome:a.nome,email:a.email}},{status:201})}catch(e){if(console.error("❌ Erro detalhado ao criar usu\xe1rio:",e),e&&"object"==typeof e&&"code"in e)switch(e.code){case"P2002":return console.log("❌ Erro P2002: Viola\xe7\xe3o de constraint \xfanica"),i.NextResponse.json({error:"Este email j\xe1 est\xe1 em uso"},{status:400});case"P2025":return console.log("❌ Erro P2025: Registro n\xe3o encontrado"),i.NextResponse.json({error:"Erro de dados n\xe3o encontrados"},{status:400});case"P1001":return console.log("❌ Erro P1001: N\xe3o foi poss\xedvel conectar ao banco"),i.NextResponse.json({error:"Erro de conex\xe3o com o banco de dados"},{status:500});default:return console.log("❌ Erro Prisma desconhecido:",e.code),i.NextResponse.json({error:`Erro do banco de dados: ${e.message}`},{status:500})}return console.log("❌ Erro gen\xe9rico:",e instanceof Error?e.message:"Erro desconhecido"),i.NextResponse.json({error:"Erro interno do servidor",details:void 0},{status:500})}}let l=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/cadastro/route",pathname:"/api/cadastro",filename:"route",bundlePath:"app/api/cadastro/route"},resolvedPagePath:"C:\\Users\\Alan Ara\xfajo\\Documents\\Meu bolso\\src\\app\\api\\cadastro\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:g,serverHooks:m}=l;function x(){return(0,n.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:g})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},94747:(e,o,r)=>{"use strict";r.d(o,{z:()=>t});let s=require("@prisma/client"),t=global.prisma||new s.PrismaClient},96487:()=>{}};var o=require("../../../webpack-runtime.js");o.C(e);var r=e=>o(o.s=e),s=o.X(0,[243,580,663],()=>r(41545));module.exports=s})();